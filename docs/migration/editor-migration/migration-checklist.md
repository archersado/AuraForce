# Cherry Markdown è¿ç§»æ£€æŸ¥æ¸…å•

## ğŸ“‹ Phase 1: å‰ç½®å‡†å¤‡ï¼ˆDay 1ï¼‰

### âœ… ä»£ç å®¡æŸ¥
- [ ] é˜…è¯»ç°æœ‰ç¼–è¾‘å™¨ä»£ç ï¼ˆ`AIMarkdownEditor.tsx`ï¼‰
- [ ] é˜…è¯»ç°æœ‰ç¼–è¾‘å™¨ä»£ç ï¼ˆ`MarkdownPreviewEditor.tsx`ï¼‰
- [ ] ç¡®è®¤å½“å‰ä½¿ç”¨çš„ Tiptap åŠŸèƒ½
- [ ] è®°å½•æ‰€æœ‰è‡ªå®šä¹‰å·¥å…·æ æŒ‰é’®
- [ ] è®°å½•æ‰€æœ‰äº‹ä»¶å›è°ƒå‡½æ•°
- [ ] è®°å½•æ‰€æœ‰ Props æ¥å£

### âœ… æ–‡æ¡£é˜…è¯»
- [ ] é˜…è¯»è¿ç§»æŠ€æœ¯åˆ†ææŠ¥å‘Š (`docs/migration-technical-analysis.md`)
- [ ] é˜…è¯» Cherry Markdown å®˜æ–¹æ–‡æ¡£
- [ ] é˜…è¯» Cherry é…ç½®é¡¹å…¨è§£
- [ ] é˜…è¯» Cherry API æ–‡æ¡£

### âœ… ç¯å¢ƒç¡®è®¤
- [ ] ç¡®è®¤ Node.js ç‰ˆæœ¬ >= 18
- [ ] ç¡®è®¤ npm ç‰ˆæœ¬ >= 9
- [ ] è¿è¡Œ `npm run dev` ç¡®ä¿ç¯å¢ƒæ­£å¸¸
- [ ] è¿è¡Œ `npm run build` ç¡®ä¿æ„å»ºæ­£å¸¸

---

## ğŸ“¦ Phase 2: ä¾èµ–è¿ç§»ï¼ˆDay 1-2ï¼‰

### âœ… å¤‡ä»½
- [ ] å¤‡ä»½ package.json: `cp package.json package.json.backup`
- [ ] æäº¤å½“å‰ä»£ç åˆ° Git: `git add . && git commit -m "Backup before Cherry migration"`

### âœ… å¸è½½ Tiptap
- [ ] è¿è¡Œ `npm uninstall @tiptap/core`
- [ ] è¿è¡Œ `npm uninstall @tiptap/react`
- [ ] è¿è¡Œ `npm uninstall @tiptap/starter-kit`
- [ ] è¿è¡Œ `npm uninstall @tiptap/markdown`
- [ ] å¸è½½æ‰€æœ‰ `@tiptap/extension-*` åŒ…
- [ ] éªŒè¯ Tiptap åŒ…å·²ç§»é™¤: `npm list | grep tiptap`

### âœ… å®‰è£… Cherry
- [ ] è¿è¡Œ `npm install cherry-markdown`
- [ ] ï¼ˆå¯é€‰ï¼‰è¿è¡Œ `npm install mermaid`
- [ ] ï¼ˆå¯é€‰ï¼‰è¿è¡Œ `npm install echarts`
- [ ] éªŒè¯ Cherry å·²å®‰è£…: `npm list cherry-markdown`

### âœ… æ¸…ç†
- [ ] åˆ é™¤ node_modules: `rm -rf node_modules`
- [ ] åˆ é™¤ package-lock.json: `rm package-lock.json`
- [ ] åˆ é™¤ .next ç¼“å­˜: `rm -rf .next`
- [ ] é‡æ–°å®‰è£…ä¾èµ–: `npm install`
- [ ] éªŒè¯æ— æŠ¥é”™: `npm run dev`

---

## âš™ï¸ Phase 3: é…ç½®è®¾ç½®ï¼ˆDay 2ï¼‰

### âœ… CSS é…ç½®
- [ ] åœ¨ `src/app/globals.css` å¯¼å…¥ Cherry CSS
- [ ] æ·»åŠ è‡ªå®šä¹‰ä¸»é¢˜å˜é‡
- [ ] æµ‹è¯•æ ·å¼åŠ è½½ï¼ˆF12 æ£€æŸ¥æ˜¯å¦æœ‰ .cherry å…ƒç´ ï¼‰

### âœ… TypeScript é…ç½®
- [ ] åˆ›å»º `src/types/cherry-markdown.d.ts`
- [ ] æ·»åŠ  CherryOptions æ¥å£
- [ ] æ·»åŠ  Cherry ç±»å£°æ˜
- [ ] éªŒè¯ TypeScript æ— æŠ¥é”™

### âœ… Next.js é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] æ£€æŸ¥ `next.config.js`
- [ ] æ·»åŠ  webpack resolve.aliasï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] æµ‹è¯•æ„å»º: `npm run build`

---

## ğŸ§© Phase 4: åŸºç¡€ç»„ä»¶å¼€å‘ï¼ˆDay 3-4ï¼‰

### âœ… ç›®å½•ç»“æ„
- [ ] åˆ›å»º `src/components/workspace/cherry/` ç›®å½•
- [ ] åˆ›å»º `useCherryMarkdown.ts`
- [ ] åˆ›å»º `CherryMarkdownAdapter.tsx`
- [ ] åˆ›å»º `config.ts`
- [ ] åˆ›å»º `types.ts`

### âœ… React Hook (`useCherryMarkdown.ts`)
- [ ] å®ç° `containerRef` å¼•ç”¨
- [ ] å®ç° Cherry å®ä¾‹åŒ–
- [ ] å®ç° `handleChange` å›è°ƒ
- [ ] å®ç° `value` åŒæ­¥é€»è¾‘
- [ ] å®ç° `destroy` æ¸…ç†
- [ ] æš´éœ² API (getValue, setValue, focus, etc.)

### âœ… é€‚é…å™¨ç»„ä»¶ (`CherryMarkdownAdapter.tsx`)
- [ ] å®ç° forwardRef
- [ ] ä½¿ç”¨ useCherryMarkdown hook
- [ ] å®ç° CherryMarkdownAdapterRef æ¥å£
- [ ] æš´éœ² useImperativeHandle
- [ ] æ·»åŠ  className å’Œ style props
- [ ] æ·»åŠ  readOnly å±æ€§

### âœ… é…ç½®æ–‡ä»¶ (`config.ts`)
- [ ] å®šä¹‰å·¥å…·æ é…ç½®
- [ ] å®šä¹‰é¢„è§ˆå™¨é…ç½®
- [ ] å®šä¹‰ç¼–è¾‘å™¨é…ç½®
- [ ] å®šä¹‰è‡ªå®šä¹‰ä¸»é¢˜
- [ ] å¯¼å‡ºé»˜è®¤é…ç½®å¯¹è±¡

### âœ… æµ‹è¯•
- [ ] åˆ›å»ºæµ‹è¯•æ–‡ä»¶ `cherry.test.tsx`
- [ ] æµ‹è¯•åŸºç¡€æ¸²æŸ“
- [ ] æµ‹è¯•å†…å®¹å˜åŒ–
- [ ] æµ‹è¯• API è°ƒç”¨
- [ ] æµ‹è¯•åªè¯»æ¨¡å¼

---

## ğŸ”§ Phase 5: ç¼–è¾‘å™¨è¿ç§»ï¼ˆDay 5-7ï¼‰

### âœ… AIMarkdownEditor.tsx è¿ç§»
- [ ] å¤‡ä»½åŸæ–‡ä»¶: `cp AIMarkdownEditor.tsx AIMarkdownEditor.tsx.old`
- [ ] ä¿ç•™åŸ Props æ¥å£
- [ ] å¯¼å…¥ CherryMarkdownAdapter
- [ ] é‡å†™æ¸²æŸ“é€»è¾‘
- [ ] ä¿æŒå·¥å…·æ æŒ‰é’®å¸ƒå±€
- [ ] ä¿æŒçŠ¶æ€æ åŠŸèƒ½
- [ ] æµ‹è¯•æ‰€æœ‰åŠŸèƒ½:
  - [ ] æ ‡é¢˜ï¼ˆH1-H6ï¼‰
  - [ ] ç²—ä½“/æ–œä½“/ä»£ç 
  - [ ] åˆ—è¡¨ï¼ˆæ— åº/æœ‰åº/ä»»åŠ¡ï¼‰
  - [ ] é“¾æ¥/å›¾ç‰‡
  - [ ] ä»£ç å—
  - [ ] è¡¨æ ¼
  - [ ] å¼•ç”¨
  - [ ] æ°´å¹³çº¿
- [ ] æµ‹è¯•é¢„è§ˆæ¨¡å¼åˆ‡æ¢
- [ ] æµ‹è¯•ä¿å­˜æŒ‰é’®
- [ ] æµ‹è¯•æœªä¿å­˜å¾½ç« 
- [ ] æµ‹è¯•å­—ç¬¦ç»Ÿè®¡

### âœ… MarkdownPreviewEditor.tsx è¿ç§»
- [ ] å¤‡ä»½åŸæ–‡ä»¶: `cp MarkdownPreviewEditor.tsx MarkdownPreviewEditor.tsx.old`
- [ ] ä¿ç•™åŸ Props æ¥å£
- [ ] å¯¼å…¥ CherryMarkdownAdapter
- [ ] é‡å†™æ¸²æŸ“é€»è¾‘
- [ ] å®ç° Preview/Source æ¨¡å¼åˆ‡æ¢
- [ ] ä¿æŒæµ®åŠ¨å·¥å…·æ ï¼ˆCherry åŸç”Ÿæ”¯æŒï¼‰
- [ ] æµ‹è¯•æ‰€æœ‰åŠŸèƒ½:
  - [ ] å®æ—¶é¢„è§ˆ
  - [ ] æºç æ¨¡å¼ç¼–è¾‘
  - [ ] åŒå‘è½¬æ¢
  - [ ] æ ¼å¼åŒ–åŠŸèƒ½
- [ ] æµ‹è¯•è§†å›¾åˆ‡æ¢
- [ ] æµ‹è¯•å­—ç¬¦ç»Ÿè®¡

---

## ğŸ§ª Phase 6: æµ‹è¯•éªŒè¯ï¼ˆDay 8-9ï¼‰

### âœ… åŠŸèƒ½æµ‹è¯•
- [ ] æµ‹è¯•æ‰€æœ‰ Markdown è¯­æ³•æ¸²æŸ“
- [ ] æµ‹è¯•ç¼–è¾‘/é¢„è§ˆ/æºç æ¨¡å¼åˆ‡æ¢
- [ ] æµ‹è¯•å·¥å…·æ æŒ‰é’®
- [ ] æµ‹è¯•å¿«æ·é”®ï¼ˆCtrl+B, Ctrl+I, etc.ï¼‰
- [ ] æµ‹è¯•å›¾ç‰‡æ‹–æ‹½ä¸Šä¼ 
- [ ] æµ‹è¯•é“¾æ¥æ’å…¥
- [ ] æµ‹è¯•ä»£ç å—é«˜äº®
- [ ] æµ‹è¯•è¡¨æ ¼ç¼–è¾‘
- [ ] æµ‹è¯•æ•°å­¦å…¬å¼ï¼ˆKaTeXï¼‰
- [ ] ï¼ˆå¯é€‰ï¼‰æµ‹è¯• Mermaid æµç¨‹å›¾
- [ ] ï¼ˆå¯é€‰ï¼‰æµ‹è¯• ECharts å›¾è¡¨

### âœ… æ¥å£å…¼å®¹æ€§æµ‹è¯•
- [ ] æµ‹è¯•åŸæœ‰çš„æ‰€æœ‰ Props
- [ ] æµ‹è¯• onChange å›è°ƒè§¦å‘
- [ ] æµ‹è¯• onSave å›è°ƒè§¦å‘
- [ ] æµ‹è¯• readOnly æ¨¡å¼
- [ ] æµ‹è¯• placeholder æ˜¾ç¤º
- [ ] æµ‹è¯• className åº”ç”¨
- [ ] æµ‹è¯• ref æš´éœ²çš„ API

### âœ… æ•°æ®å…¼å®¹æ€§æµ‹è¯•
- [ ] æµ‹è¯•æ—§æ•°æ®åŠ è½½
- [ ] æµ‹è¯•æ–°æ•°æ®ä¿å­˜
- [ ] æµ‹è¯•ç‰¹æ®Šå­—ç¬¦å¤„ç†
- [ ] æµ‹è¯•ç¼–ç é—®é¢˜
- [ ] æµ‹è¯•å¤§æ–‡ä»¶æ€§èƒ½

### âœ… æµè§ˆå™¨å…¼å®¹æ€§
- [ ] Chrome æµ‹è¯•
- [ ] Firefox æµ‹è¯•
- [ ] Safari æµ‹è¯•
- [ ] Edge æµ‹è¯•
- [ ] ç§»åŠ¨ç«¯ Safari æµ‹è¯•
- [ ] ç§»åŠ¨ç«¯ Chrome æµ‹è¯•

### âœ… æ€§èƒ½æµ‹è¯•
- [ ] æµ‹è¯•åˆå§‹åŒ–æ—¶é—´
- [ ] æµ‹è¯•å¤§æ–‡æ¡£æ¸²æŸ“ï¼ˆ10KBï¼‰
- [ ] æµ‹è¯•å¤§æ–‡æ¡£æ¸²æŸ“ï¼ˆ100KBï¼‰
- [ ] æµ‹è¯•å†…å­˜ä½¿ç”¨
- [ ] æµ‹è¯•å¸§ç‡ï¼ˆå¼€å‘å·¥å…· Performanceï¼‰

---

## ğŸ“Š Phase 7: ä¼˜åŒ–å’Œæ¸…ç†ï¼ˆDay 10ï¼‰

### âœ… ä»£ç ä¼˜åŒ–
- [ ] æ£€æŸ¥ä»£ç è§„èŒƒï¼ˆESLintï¼‰
- [ ] ç§»é™¤æœªä½¿ç”¨çš„å¯¼å…¥
- [ ] ä¼˜åŒ–ç»„ä»¶æ€§èƒ½ï¼ˆuseMemo, useCallbackï¼‰
- [ ] æ·»åŠ é”™è¯¯è¾¹ç•Œ
- [ ] æ·»åŠ åŠ è½½çŠ¶æ€

### âœ… æ ·å¼ä¼˜åŒ–
- [ ] è°ƒæ•´ä¸»é¢˜é¢œè‰²åŒ¹é…é¡¹ç›®é£æ ¼
- [ ] ä¼˜åŒ–å“åº”å¼å¸ƒå±€
- [ ] ä¼˜åŒ–ç§»åŠ¨ç«¯æ ·å¼
- [ ] ç§»é™¤æœªä½¿ç”¨çš„ Tailwind ç±»

### âœ… æ¸…ç†
- [ ] åˆ é™¤ `.old` å¤‡ä»½æ–‡ä»¶
- [ ] æ¸…ç† Tiptap ç›¸å…³ä»£ç 
- [ ] æ›´æ–°å¯¼å…¥è·¯å¾„
- [ ] åˆ é™¤æœªä½¿ç”¨çš„ç±»å‹å®šä¹‰
- [ ] è¿è¡Œ `npm run lint` æ£€æŸ¥

---

## ğŸ“ Phase 8: æ–‡æ¡£æ›´æ–°ï¼ˆDay 10ï¼‰

### âœ… ä»£ç æ–‡æ¡£
- [ ] æ›´æ–°ç»„ä»¶ JSDoc æ³¨é‡Š
- [ ] æ›´æ–° Props æ¥å£æ³¨é‡Š
- [ ] æ·»åŠ ä½¿ç”¨ç¤ºä¾‹
- [ ] æ·»åŠ  API æ–‡æ¡£

### âœ… é¡¹ç›®æ–‡æ¡£
- [ ] æ›´æ–° README.md
- [ ] æ›´æ–° CHANGELOG.md
- [ ] æ·»åŠ è¿ç§»è¯´æ˜
- [ ] æ·»åŠ  cherry-markdown å°èŠ‚

---

## ğŸš€ Phase 9: ä¸Šçº¿å‡†å¤‡ï¼ˆDay 11ï¼‰

### âœ… Git å‡†å¤‡
- [ ] ä»£ç å®¡æŸ¥è¯·æ±‚ï¼ˆPull Requestï¼‰
- [ ] ä¿®å¤å®¡æŸ¥æ„è§
- [ ] é€šè¿‡æ‰€æœ‰ CI æ£€æŸ¥
- [ ] åˆå¹¶åˆ°ä¸»åˆ†æ”¯
- [ ] æ‰“ tag: `git tag -a v0.2.0 -m "Migrate to Cherry Markdown"`

### âœ… æµ‹è¯•ç¯å¢ƒ
- [ ] éƒ¨ç½²åˆ° staging ç¯å¢ƒ
- [ ] å†’çƒŸæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•
- [ ] ç›‘æ§é”™è¯¯æ—¥å¿—
- [ ] æ”¶é›†åé¦ˆ

### âœ… å›æ»šå‡†å¤‡
- [ ] å‡†å¤‡å›æ»šæ–¹æ¡ˆ
- [ ] è®°å½•å›æ»šæ­¥éª¤
- [ ] ç¡®è®¤å›æ»šæ—¶é—´çª—å£
- [ ] é€šçŸ¥ç›¸å…³å›¢é˜Ÿ

---

## ğŸ¯ Phase 10: ç”Ÿäº§ä¸Šçº¿ï¼ˆDay 12+ï¼‰

### âœ… ä¸Šçº¿æ­¥éª¤
- [ ] é€šçŸ¥ç»´æŠ¤çª—å£
- [ ] å¤‡ä»½ç”Ÿäº§æ•°æ®åº“
- [ ] æ‰§è¡Œéƒ¨ç½²
- [ ] æ‰§è¡Œæ•°æ®åº“è¿ç§»ï¼ˆå¦‚æœ‰ï¼‰
- [ ] éªŒè¯å…³é”®åŠŸèƒ½
- [ ] ç›‘æ§é”™è¯¯ç‡
- [ ] ç›‘æ§æ€§èƒ½æŒ‡æ ‡
- [ ] æ”¶é›†ç”¨æˆ·åé¦ˆ

### âœ… ä¸Šçº¿åç›‘æ§
- [ ] ç›‘æ§ 24 å°æ—¶
- [ ] æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
- [ ] æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—
- [ ] æ”¶é›†ç”¨æˆ·åé¦ˆ
- [ ] è®°å½•é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- âœ… [å®Œæ•´å®‰è£…æŒ‡å—](./cherry-markdown-installation.md)
- âœ… [æŠ€æœ¯åˆ†ææŠ¥å‘Š](./migration-technical-analysis.md)
- âœ… [åŒ…è¿ç§»å‚è€ƒ](./package-migration-reference.md)
- âœ… [è¿ç§»è„šæœ¬](../migrate-to-cherry.sh)

---

## ğŸ”— æœ‰ç”¨èµ„æº

- [Cherry Markdown GitHub](https://github.com/Tencent/cherry-markdown)
- [Cherry å®˜æ–¹æ–‡æ¡£](https://tencent.github.io/cherry-markdown/examples/)
- [é…ç½®é¡¹å…¨è§£](https://github.com/Tencent/cherry-markdown/wiki/%E9%85%8D%E7%BD%AE%E9%A1%B9%E5%85%A8%E8%A7%A3)
- [API æ–‡æ¡£](https://tencent.github.io/cherry-markdown/examples/api.html)
- [React é›†æˆç¤ºä¾‹](https://github.com/Tencent/cherry-markdown/wiki/hello-world)

---

**æ£€æŸ¥æ¸…å•ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-02-01
**é¢„è®¡è€—æ—¶**: 10-12 ä¸ªå·¥ä½œæ—¥

**æç¤º**: å»ºè®®æ¯ä¸ª Phase å®Œæˆåè¿›è¡Œ Git æäº¤ï¼Œæ–¹ä¾¿å›æ»šå’Œè¿½è¸ªè¿›åº¦ã€‚
