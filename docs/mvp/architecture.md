# AuraForce MVP 架构设计文档

## 🏗️ 整体架构

### 核心模块设计

```
AuraForce MVP/
├── src/
│   ├── core/                    # 核心引擎
│   │   ├── skill-extractor.js   # 技能提取引擎
│   │   ├── cc-generator.js      # CC扩展资产生成器
│   │   ├── conversation-flow.js # 对话流控制器
│   │   └── pattern-analyzer.js  # 模式分析器
│   ├── components/              # React组件
│   │   ├── SkillExtraction/     # 技能提取UI组件
│   │   ├── Visualization/       # 可视化组件
│   │   └── Demo/               # 演示组件
│   ├── pages/                   # Next.js页面
│   │   ├── index.tsx           # 主页面
│   │   ├── skill-builder.tsx   # 技能构建器页面
│   │   └── demo.tsx            # 演示页面
│   ├── utils/                   # 工具函数
│   └── types/                   # TypeScript类型定义
├── mvp/
│   ├── demo/                    # MVP演示脚本
│   └── templates/               # CC资产模板
├── config/                      # 配置文件
└── docs/mvp/                   # MVP文档
```

## 🚀 核心组件设计

### 1. 技能提取引擎 (SkillExtractor)

**功能**：通过情景式对话提取用户技能和工作模式

**核心特性**：
- 情景驱动的引导对话
- 多轮对话状态管理
- 智能追问机制
- 技能模式识别

### 2. CC扩展资产生成器 (CCGenerator)

**功能**：将提取的技能转换为Claude Code扩展资产

**生成资产类型**：
- Workflows (.md文件)
- Subagents (.md文件)
- Skills (功能模块)
- Scripts (自动化脚本)

### 3. 可视化技能构建器 (SkillBuilder)

**功能**：实时可视化技能构建过程

**特性**：
- 技能雷达图生成
- 工作流程图展示
- 实时技能卡片更新
- 拖拽式编辑

## 📊 数据流设计

```
用户输入 → 对话分析 → 模式识别 → 技能提取 → 资产生成 → 可视化展示
     ↓         ↓         ↓         ↓         ↓         ↓
   自然语言   意图理解   工作模式   技能DNA   CC代码    用户界面
```

## 🎯 MVP实现范围

### 第一阶段功能
- ✅ 基础项目架构
- ⏳ 营销场景技能提取
- ⏳ 简单CC资产生成
- ⏳ 可视化技能展示
- ⏳ 端到端Demo流程

### MVP成功标准
- 用户能完成30分钟技能提取会话
- 生成可用的CC扩展资产
- 技能提取准确率80%+
- 用户体验NPS 50+

## 🔧 技术栈选择

### 前端技术栈
- **Next.js 14**：React全栈框架
- **TypeScript**：类型安全
- **Tailwind CSS**：UI样式
- **Framer Motion**：动画效果
- **React Flow**：流程图可视化
- **Lucide React**：图标库

### 后端技术栈
- **Node.js**：服务器运行时
- **Anthropic SDK**：Claude AI集成
- **YAML Parser**：CC资产格式处理
- **Markdown-it**：文档生成

### 核心依赖说明
- **@anthropic-ai/sdk**：Claude API接入
- **react-flow-renderer**：技能流程可视化
- **yaml**：CC资产配置解析
- **uuid**：唯一标识生成

## 🎮 用户旅程设计

### 技能提取流程
```
1. 欢迎引导 → 选择角色类型 (营销专家)
2. 情景设定 → "想象你刚接到campaign任务..."
3. 对话引导 → AI问题引导，用户自然回答
4. 实时反馈 → 技能卡片逐步生成
5. 技能确认 → 用户确认提取的技能模式
6. 资产生成 → 自动生成CC扩展包
7. 演示验证 → 立即试用生成的工具
```

### UI交互设计
- **对话气泡**：模拟聊天界面，降低认知门槛
- **进度指示**：显示技能提取进度
- **实时可视化**：边聊天边生成技能雷达图
- **成就反馈**：技能解锁动画和音效
- **即时预览**：生成的CC资产实时预览

## 📋 MVP开发计划

### Week 1-2: 核心引擎开发
- [ ] 技能提取对话引擎
- [ ] 基础CC资产生成器
- [ ] 模式分析算法

### Week 3-4: 前端界面开发
- [ ] 技能构建器界面
- [ ] 可视化组件
- [ ] 用户流程页面

### Week 5-6: 集成与优化
- [ ] 端到端流程集成
- [ ] 用户体验优化
- [ ] 演示脚本准备

## 🎯 关键技术挑战

1. **自然语言理解**：如何准确理解用户的工作描述
2. **技能模式提取**：从对话中识别可复用的工作模式
3. **CC代码生成**：将抽象的工作流转换为具体的代码
4. **用户体验**：让复杂的技能提取过程变得简单有趣

## 📊 技术实现策略

### Claude API集成策略
```javascript
// 技能提取Prompt模板
const skillExtractionPrompt = `
你是一位专业的技能提取专家。现在要从用户的工作描述中提取可复用的技能模式。

当前情景：${scenario}
用户描述：${userInput}

请分析并提取：
1. 工作步骤和流程
2. 使用的工具和资源
3. 决策点和判断标准
4. 质量控制方法

输出格式：JSON
`;
```

### CC资产生成模板
```yaml
# 生成的Workflow模板
name: "用户自定义营销Campaign"
description: "基于用户技能提取的营销工作流"
steps:
  - name: "竞品分析"
    action: "调用数据收集子代理"
  - name: "洞察提炼"
    action: "运行洞察分析算法"
  - name: "创意生成"
    action: "执行创意生成工作流"
```

这是我们MVP的核心架构设计！接下来我们开始实现具体的代码组件。